usethis::use_appveyor()
usethis::use_readme_rmd()
usethis::use_travis()
usethis::use_data()
usethis::use_data_raw()
# Create example datasets -------------------------------------------------
set.seed(2018-05-12)
single_landscape_create = function(x) {
NLMR::nlm_randomcluster(ncol = 30, nrow = 30, p = 0.4, ai = c(0.25, 0.25, 0.5),
rescale = FALSE)
}
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
library(sp)
plot(landscape)
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE, fun=function(x){x})
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE, fun=function(x){x})
plot(landscape)
landscape <- raster::rasterToContour(landscape)
plot(landscape)
landscape <- sf::s_as_sf(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- sf::st_as_sf(landscape)
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE, fun=function(x){x==1})
plot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
# landscape <- sf::st_as_sf(landscape)
library(sp)
levelplot(landscape)
spplot(landscape)
devtools::install_github("mstrimas/smoothr")
landscape <- smoothr::smooth(landscape, method = "chaikin")
spplot(landscape)
landscape <- smoothr::smooth(landscape, method = "chaikin")
spplot(landscape)
landscape <- smoothr::smooth(landscape, method = "chaikin")
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = "chaikin", wrap = TRUE)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = "chaikin", wrap = TRUE)
landscape <- smoothr::smooth_chaikin(landscape, method = "chaikin", wrap = TRUE)
landscape <- smoothr::smooth_chaikin(landscape, wrap = TRUE)
landscape <- smoothr::smooth_chaikin(landscape, refinements = 10)
landscape <- smoothr::smooth(landscape, method = 'chaikin', refinements = 10)
spplot(landscape)
landscape <- smoothr::smooth(landscape, method = 'chaikin', refinements = 5)
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'chaikin', refinements = 5)
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'ksmooth')
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'spline')
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'spline', vertex_factor = 3)
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'densify')
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
spplot(landscape)
landscape <- smoothr::smooth(landscape, method = 'chaikin')
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'chaikin')
spplot(landscape)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'chaikin')
spplot(landscape)
landscape <- single_landscape_create()
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- smoothr::smooth(landscape, method = 'chaikin')
spplot(landscape)
landscape_filled <- smoothr::fill_holes(landscape, 1)
spplot(landscape)
landscape_filled <- smoothr::fill_holes(landscape, 5)
spplot(landscape)
spplot(landscape_filled)
landscape_filled <- smoothr::fill_holes(landscape, 100)
spplot(landscape_filled)
landscape_filled <- smoothr::fill_holes(landscape, 10000)
spplot(landscape_filled)
landscape_filled <- smoothr::fill_holes(landscape, 10000000)
spplot(landscape_filled)
landscape_filled
landscape_filled <- smoothr::fill_holes(landscape, 100000000000)
spplot(landscape_filled)
landscape_filled <- smoothr::fill_holes(landscape, 10000000000000000000000000000)
spplot(landscape_filled)
landscape_filled <- smoothr::fill_holes(landscape, 1000000000000000000000000000000000000000000000000000000000000000000000000)
spplot(landscape_filled)
library(smoothr)
p <- jagged_polygons$geometry[5]
area_thresh <- units::set_units(1000, km^2)
p_dropped <- fill_holes(p, threshold = area_thresh)
# plot
par(mar = c(0, 0, 1, 0), mfrow = c(1, 2))
plot(p, col = "black", main = "Original")
plot(p_dropped, col = "black", main = "After fill_holes()")
p
landscape <- sf::st_as_sf(landscape)
landscape_filled <- smoothr::fill_holes(landscape, 1000000000000000000000000000000000000000000000000000000000000000000000000)
spplot(landscape_filled)
plot(landscape_filled)
landscape_filled
p
devtools::load_all(".")
devtools::load_all(".")
plot(landscape)
landscape
usethis::use_package("sf")
devtools::load_all(".")
landscape
plot(landscape)
landscape_cast <- st_cast(landscape, "POLYGON", ids = seq_along(landscape))
landscape_cast <- sf::st_cast(landscape, "POLYGON", ids = seq_along(landscape))
landscape_cast
landscape_cast$area <- st_area(landscape_cast) / 10000
landscape_cast$area <- af::st_area(landscape_cast) / 10000
landscape_cast$area <- sf::st_area(landscape_cast) / 10000
landscape_cast$area
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, lut)
# drop geometry and get patch id
landscape_tibble         <- sf::st_set_geometry(landscape_cast, NULL)
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, lut)
single_landscape_create = function(x) {
NLMR::nlm_randomcluster(ncol = 30, nrow = 30, p = 0.4, ai = c(0.25, 0.25, 0.5),
rescale = FALSE)
}
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
names(landscape) <- "lut"
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- sf::st_as_sf(landscape)
landscape
usethis::use_data(landscape, overwrite = TRUE)
# if multipolygon, cast to single polygons (patch level)
landscape_cast <- sf::st_cast(landscape, "POLYGON")
# compute area and divide by 10000 to get hectare
landscape_cast$area <- sf::st_area(landscape_cast) / 10000
# drop geometry and get patch id
landscape_tibble         <- sf::st_set_geometry(landscape_cast, NULL)
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, lut)
landscape_tibble         <- dplyr::mutate(landscape_tibble_grouped,
id = row_number())
# drop geometry and get patch id
landscape_tibble         <- sf::st_set_geometry(landscape_cast, NULL)
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, lut)
landscape_tibble         <- dplyr::mutate(landscape_tibble_grouped,
id = dplyr::row_number())
landscape_tibble
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
names(landscape) <- "class"
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- sf::st_as_sf(landscape)
usethis::use_data(landscape, overwrite = TRUE)
# drop geometry and get patch id
landscape_tibble         <- sf::st_set_geometry(landscape_cast, NULL)
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, class)
# Example maps from NLMR --------------------------------------------------
landscape <- single_landscape_create()
names(landscape) <- "class"
landscape <- raster::rasterToPolygons(landscape, dissolve = TRUE)
landscape <- sf::st_as_sf(landscape)
landscape
usethis::use_data(landscape, overwrite = TRUE)
# if multipolygon, cast to single polygons (patch level)
landscape_cast <- sf::st_cast(landscape, "POLYGON")
# compute area and divide by 10000 to get hectare
landscape_cast$area <- sf::st_area(landscape_cast) / 10000
# drop geometry and get patch id
landscape_tibble         <- sf::st_set_geometry(landscape_cast, NULL)
landscape_tibble_grouped <- dplyr::group_by(landscape_tibble, class)
landscape_tibble         <- dplyr::mutate(landscape_tibble_grouped,
id = dplyr::row_number())
landscape_tibble
tibble::tibble(
level = "patch",
class = as.integer(landscape_tibble$class),
id = as.integer(landscape_tibble$id),
metric = "area",
value = as.double(landscape_tibble$area)
)
devtools::load_all(".")
usethis::use_gpl3_license()
options(usethis.full_name = "Marco Sciaini")
usethis::use_gpl3_license()
devtools::load_all(".")
source("https://install-github.me/r-lib/rcmdcheck")
rmarkdown::render("README.Rmd")
vm_p_area(landscape, class)
landscapemetrics::lsm_p_area(landscapemetrics::landscape)
install.packages(c("mapview", "NLMR", "stars", "xaringan"))
